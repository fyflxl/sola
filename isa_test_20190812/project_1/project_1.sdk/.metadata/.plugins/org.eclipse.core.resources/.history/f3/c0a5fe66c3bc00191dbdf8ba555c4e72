/*
 * Empty C++ Application
 */

#include <stdio.h>
#include <stdlib.h>
#include <iostream>
#include <math.h>
#include <fcntl.h>
#include <string.h>
#include <time.h>
#include "isa_hw.h"

int main( int argc, char *argv[])
{
	unsigned int wdata = 0;
	char buff[256];
    char *input_imgfn = buff;
    if(argc==1)
    {
    	strncpy(input_imgfn, "person.jpg", 256);
//        printf("WEIGHT_BASE = %d|%x\n",WEIGHT_BASE,WEIGHT_BASE);
//        printf("BETA_BASE = %d|%x\n",BETA_BASE,BETA_BASE);
//        printf("MEM_BASE = %d|%x\n",MEM_BASE,MEM_BASE);
    }
    else
    {
    	strncpy(input_imgfn, argv[1], 256);
//    	WEIGHT_BASE = atoi(argv[2]);
//        BETA_BASE = atoi(argv[3]);
//        MEM_BASE  = atoi(argv[4]);
//        printf("WEIGHT_BASE = %d|%x\n",WEIGHT_BASE,WEIGHT_BASE);
//        printf("BETA_BASE = %d|%x\n",BETA_BASE,BETA_BASE);
//        printf("MEM_BASE = %d|%x\n",MEM_BASE,MEM_BASE);
    }
	double time;
    time = what_time_is_it_now();
	yolov2_hls_ps(net, X,WEIGHT_BASE,BETA_BASE,MEM_BASE);
	printf("Predicted in %f seconds.\n",what_time_is_it_now()-time);



	printf("YOLOv2 TEST End\n");

    return 0;
}
